\renewcommand{\thesection}{\Alph{section}.\arabic{section}}
\setcounter{section}{0}

\begin{appendices}
\chapter{Appendix}

\section{KL Divergence between Two Normal Distribution}
\begin{align*}
D_\text{KL}(P||Q) & = \mathbbm{E}_P\Big[\textrm{log}\frac{P}{Q}\Big]\\
\end{align*}
Consider two multivariate Gaussians in $\mathbbm{R}^n$, $P_1$ and $P_2$

\begin{align*}
D_\text{KL}(P||Q) &= \int \left[ \frac{1}{2} \log\frac{|\Sigma_2|}{|\Sigma_1|} - \frac{1}{2} (x-\mu_1)^T\Sigma_1^{-1}(x-\mu_1) + \frac{1}{2} (x-\mu_2)^T\Sigma_2^{-1}(x-\mu_2) \right] \times p(x) dx \\
&= \frac{1}{2} \log\frac{|\Sigma_2|}{|\Sigma_1|} - \frac{1}{2} \text{tr} \left\{E[(x - \mu_1)(x - \mu_1)^T] \ \Sigma_1^{-1} \right\} + \frac{1}{2} E[(x - \mu_2)^T \Sigma_2^{-1} (x - \mu_2)] \\
&= \frac{1}{2} \log\frac{|\Sigma_2|}{|\Sigma_1|} - \frac{1}{2} \text{tr}\ \{I_n \} + \frac{1}{2} (\mu_1 - \mu_2)^T \Sigma_2^{-1} (\mu_1 - \mu_2) + \frac{1}{2} \text{tr} \{ \Sigma_2^{-1} \Sigma_1 \} \\
&= \frac{1}{2}\left[\log\frac{|\Sigma_2|}{|\Sigma_1|} - n + \text{tr} \{ \Sigma_2^{-1}\Sigma_1 \} + (\mu_2 - \mu_1)^T \Sigma_2^{-1}(\mu_2 - \mu_1)\right]
\end{align*}

Trace tricks:
$$x^TAx = tr[x^TAx] = tr[xx^TA]$$
$$tr[A+B] = tr[A]+tr[B]$$
$$E[(x-\mu)^T \Sigma^{-1} (x-\mu)]= tr(E[(x-\mu)(x-\mu)^T] \Sigma^{-1})$$
$$\Sigma = E[(X-\mu)(X-\mu)^T]=E[XX^T]-\mu\mu^T$$
$$E[XX^T] = \Sigma + \mu\mu^T$$

Note that the determinant of a diagonal matrix could be computed as product of its diagonal.

\end{appendices}
